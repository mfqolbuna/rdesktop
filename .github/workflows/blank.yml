name: Demo Jeda Manual (Persetujuan Lingkungan)

on:
  push:
    branches:
      - main
  workflow_dispatch:
    # Mengizinkan menjalankan workflow ini secara manual dari Actions tab

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Simulasi proses Build
        run: echo "Proses pembangunan aplikasi selesai. Siap untuk deployment."

  deploy:
    # Job ini akan menunggu persetujuan
    needs: build
    runs-on: ubuntu-latest
    environment:
      # Tentukan nama lingkungan yang telah Anda buat di pengaturan repo
      name: Staging
      # Opsional: timeout-minutes memastikan job berhenti jika tidak disetujui dalam 30 menit
      timeout-minutes: 30

    steps:
      - name: Menunggu Persetujuan
        run: echo "Menunggu persetujuan dari reviewer yang ditunjuk di lingkungan Staging..."

      - name: Simulasi proses Deployment setelah disetujui
        run: echo "Persetujuan diterima. Melanjutkan deployment ke server Staging."
      
      # Tambahkan langkah deployment Anda di sini, misalnya:
      # - uses: some-action-to-deploy-to-aws-s3@v1
      #   with:
      #     ...
